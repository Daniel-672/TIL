# R실습모음

### - Day1

```R
> # 문제1
> v1 <- 1:10
> v2 <- v1 * 2
> max_v <- max(v2)
> min_v <- min(v2)
> avg_v <- mean(v2)
> sum_v <- sum(v2)
> v3 <- v2[-5]
> v1; v2; v3; max_v; min_v; avg_v; sum_v;
 [1]  1  2  3  4  5  6  7  8  9 10
 [1]  2  4  6  8 10 12 14 16 18 20
[1]  2  4  6  8 12 14 16 18 20
[1] 20
[1] 2
[1] 11
[1] 110
> 
> # 문제2
> v4 <- seq(1, 10, 2)
> v5 <- rep(1, 5)
> v6 <- rep(1:3, 3)
> v7 <- rep(1:4, each=2)  
> 
> # 문제3
> nums <- sample(1:100, 10)
> sort(nums)
 [1] 14 20 35 54 57 59 63 71 79 99
> sort(nums, decreasing = T)
 [1] 99 79 71 63 59 57 54 35 20 14
> nums[nums >50]
[1] 99 63 59 79 54 57 71
> which(nums <= 50)
[1] 1 2 7
> which.max(nums)
[1] 3
> which.min(nums)
[1] 7
> 
> # 문제4
> v8 <- seq(1, 10, 3)
> names(v8) <- LETTERS[1:4]
> v8
 A  B  C  D 
 1  4  7 10 
> 
> # 문제5
> score <- sample(1:20, 5)
> myFriend <- c('둘리', '또치', '도우너', '희동', '듀크' )
> paste(score, myFriend, sep='-')
[1] "13-둘리"  "5-또치"   "7-도우너" "18-희동"  "14-듀크" 
> myFriend[which.max(score)]
[1] "희동"
> myFriend[which.min(score)]
[1] "또치"
> myFriend[which(score > 10)]
[1] "둘리" "희동" "듀크"
> 
> # 문제6
> count <- sample(1:100, 7)
> week.korname <- c('일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일')
> paste(week.korname, count, sep=':')
[1] "일요일:61" "월요일:14" "화요일:82" "수요일:15" "목요일:49" "금요일:39"
[7] "토요일:34"
> week.korname[which.max(count)]
[1] "화요일"
> week.korname[which.min(count)]
[1] "월요일"
> week.korname[which(count > 50)]
[1] "일요일" "화요일"
```



### - Day2

```R
# 문제1
vec1 <- seq(10, 38, 2)
m1 <- matrix(vec1, nrow=3, ncol=5, byrow=T)
m2 <- m1 + 100
m_max_v <- max(m1)
m_min_v <- min(m1)
row_max <- apply(m1, 1, max)
col_max <- apply(m1, 2, max)

m1; m2; m_max_v; m_min_v; row_max; col_max

# 문제2
n1 <- c(1,2,3)
n2 <- c(4,5,6)
n3 <- c(7,8,9)
m2 <- cbind(c1, c2, c3)
m2

num <- c(n1, n2, n3)
num
mm2 = matrix(num, 3, nrow=3)

# 문제3
m3 <-matrix(1:9, nrow =3, byrow=T)
m3

# 문제4
m4 <- m3
rownames(m4) <- c("row1","row2","row3")
colnames(m4) <- c("col1","col2","col3")
m3; m4


# 문제5
alpha <- matrix(letters[1:6], nrow=2)
alpha2 <- rbind(alpha, letters[24:26])
alpha3 <- cbind(alpha, c('s','p'))
alpha; alpha2; alpha3

# 문제6
a <- array(1:24, dim=c(2,3,4)); a
a[2,3,4]
a[2, , ]
a[ ,1, ]
a[ , ,3]
a + 100
a[ , ,4] * 100
a[ 1, -1, ]; a[ 1, 2:3, ]; a[ 1, c(2,3), ]
a[ 2, , 2] <- a[ 2, , 2] + 100; a
a[ , , 1] <- a[ , , 1] - 2; a
a <- a * 10 ; a
rm(a); a

# 문제1
str(iris)

# 문제2
x <- seq(1, 5)
y <- x * 2
df1 <- data.frame(x, y)
df1

# 문제3
col1 <- seq(1, 5)
col2 <- letters[1:5]
col3 <- seq(6, 10)
df2 <- data.frame(col1, col2, col3)
df2

# 문제4
제품명 <- c("사과", "딸기", "수박")
가격 <- c(1800, 1500, 3000)
판매량 <- c(24, 38, 13)
df3 <- data.frame(제품명, 가격, 판매량)
df3

# 문제5
mean(df3$가격); mean(df3$판매량)

# 문제6
name <- c("Potter", "Elsa", "Gates", "Wendy", "Ben")
gender <- factor(c("M", "F", "M", "F", "M"))
math <- c(85, 76, 99, 88, 40)
df4 <- data.frame(name, gender, math)
str(df4)
df4$stat <- c(76, 73, 95, 82, 35); df4
df4$score <- df4$math + df4$stat ; df4
df4$grade <-ifelse(df4$score >= 150,"A",
                   ifelse(df4$score >= 100,"B", 
                          ifelse(df4$score >=70,"C","D"))); df4


# [문제7] emp변수에 할당된 데이터프레임 객체의 구조를 점검한다.
emp <- read.csv("data/emp.csv")
str(emp)

# [문제8] emp 에서 3행, 4행 , 5행만 출력한다.
emp
emp[3:5,]

# [문제9] emp 에서 사번열을 제외하고 출력한다.
emp[-4] ; emp[, -4] 

# [문제10] emp 에서 ename컬럼만 출력한다.
emp[,"ename",drop=F] 
emp[,2, drop=F] 

# [문제11] emp 에서 ename 과 sal컬럼만 출력한다.
emp[,c("ename","sal")]
subset(emp, ,c("ename","sal"))

# [문제12] 업무가 SALESMAN 인 사원의 이름, 월급, 직업을 출력한다.
subset(emp, job=="SALESMAN", c("ename", "sal", "job"))

# [문제13] 월급이 1000 이상이고 3000이하인 사원들의 이름, 월급, 부서번호를 출력한다.
subset(emp, sal >= 1000 & sal <= 3000, c("ename", "sal", "deptno"))

# [문제14] emp 에서 직업이 ANALYST 가 아닌 사원들의 이름, 직업, 월급을 출력한다.
emp[emp$job !="ANALYST", c("ename","job", "sal")]

# [문제15] emp 에서 업무가 SALESMAN 이거나 ANALYST 인 사원들의 이름, 직업을 출력한다.
emp[emp$job == "SALESMAN" | emp$job == "ANALYST", c("ename","job")]
emp[emp$job == c("SALESMAN", "ANALYST"), c("ename","job")] #테스트 왔다갔다?

# [문제16] emp 에서 커미션이 정해지지 않은 직원의 이름과 월급 정보를 출력한다.
subset(emp,is.na(emp$comm), c("ename","sal")) 

# [문제17] 월급이 많은 순으로 모든 직원 정보를 출력한다.
emp[order(emp$sal, decreasing = T),][1,]

order(emp$sal, decreasing = T)

# [문제18] emp의 행과 열의 갯수를 점검한다.
str(emp)
colnames(emp)
rownames(emp)
dim(emp)

```



### - Day3

```R
# [문제1]
L1 <- list(name = "scott", sal = 3000)
result <- L1$sal * 2
result



# [문제2]
L2 <- list("scott", c(100, 200, 300))
L2

# [문제3]
L3 <- list(c(3,5,7), c("A", "B", "C")); L3
L3[[2]][1] <- "Alpha"; L3

# [문제4]
L4 <- list(alpha=0:4, beta=sqrt(1:5), gamma=log(1:5))
L4$alpha + 10
L4[[1]] + 10
L4[["alpha"]] + 10

# [문제5]
L5 <- list( data1 = LETTERS,
            data2 = read.csv("data/emp.csv")[1:3,],
            data3 = L4
          )
L5
L5$data3$gamma
unL5 <- unlist(L5)
unL5["data3.alpha2"]
str(unL5)
names(unL5) <- NULL

L5[["data1"]][1]
L5$data2[,2]
L5$data3$gamma


# [문제6]
L6 <- list(math=list(95, 90), writing=list(90, 85), reading=list(85, 80))
mean(unlist(L6))
str(unlist(L6))

x <- unlist(L6)
names(x) <- NULL
x

# [문제1]
grade <-sample(1:6,1)
if(grade <= 3){
  cat(grade,"학년은 저학년입니다.","\n")
}else{
  cat(grade,"학년은 고학년입니다.","\n")
}


# [문제2]
choice <- sample(1:5,1)
if (choice == 1){
  result <- 300 + 50
}else if (choice == 2){
  result <- 300 - 50
}else if (choice == 3){
  result <- 300 * 50
}else if (choice == 4){
  result <- 300 / 50
}else { #무조건 5
  result <- 300 %% 50
}
switch(EXPR=choice, 300 + 5, 300 - 50, 300 * 50, 300 / 50, 300 %% 50)
#cat("choice :", choice, "결과값 :", result, "\n")
cat("결과값 :", result, "\n")





# [문제3]
count <- sample(3:10,1)
deco <- sample(1:3,1)
#count;deco
for(cnt in 1:count){
  cat(switch(EXPR = deco,"*","$","#"))
}


# [문제4]
# [문제4]-1안
score <- sample(0:100,1)
grade <- switch(EXPR = ifelse(score >= 90,1,
                              ifelse(score >= 80,2, 
                                     ifelse(score >= 70,3,              
                                            ifelse(score >= 60,4,5))))
                ,"A","B","C","D","F")
cat(score, "점은", grade, "등급입니다.\n")

# [문제4]-2안
score <- sample(0:100,1)

if (score < 10){
  ch_score =paste("00", as.character(score), sep='') 
}else if (score < 100){
  ch_score =paste("0", as.character(score), sep='') 
}else {
  ch_score = as.character(score)
}
hd_ch_score <- substr(ch_score, 1, 2)
#hd_ch_score <- score %/% 10    몫으로 처리
grade <- switch(EXPR = hd_ch_score, "10"=,"09"="A","08"="B","07"="C","06"="D", "F")
cat(score, "점은", grade, "등급입니다.\n")


# [문제5]
alpha <- paste(LETTERS, letters, sep=""); alpha

```



### -Day4

```R
# [ 문제 1 ]
exam1 <- function(){
  return(paste(LETTERS, letters, sep=""))
}
print(exam1())


# [ 문제 2 ]
exam2 <- function(inNum1){
  if(is.numeric(inNum1)){
    sumAmt <- 0
    for(i in 1:inNum1){
      sumAmt <- sumAmt + i
    }
    return(sumAmt)
  }else{
    return('숫자 하나만... ')
  }
}
print(exam2(10))
print(exam2('10'))


# [ 문제 3 ]
exam3 <- function(inNum1, inNum2){
  if(is.numeric(inNum1) && is.numeric(inNum2)){
    diffNum <- abs(inNum1 - inNum2)
    return(diffNum)
  }else{
    return('숫자 두개 만... ')
  }
}
print(exam3(10, 20))
print(exam3(20, 10))
print(exam3('10', 20))
print(exam3(20, '10'))
print(exam3('20','10'))

exam3_1 <- function(inNum1, inNum2){
  if(is.numeric(inNum1) && is.numeric(inNum2)){
    if ((inNum1 - inNum2) == 0){
      diffNum <- 0
    } else if ((inNum1 - inNum2) > 0){
      diffNum <- inNum1 -inNum2
    } else {
      diffNum <- inNum2 -inNum1
    }
    return(diffNum)
  }else{
    return('숫자 두개 만... ')
  }
}
print(exam3_1(10, 20))
print(exam3_1(20, 10))
print(exam3_1('10', 20))
print(exam3_1(20, '10'))
print(exam3_1('20','10'))

# [ 문제 4 ]
exam4 <- function(inNum1, inOpr, inNum2){
  if(is.numeric(inNum1) && is.numeric(inNum2)){                 #숫자정상
    if(switch(EXPR = inOpr,"SUM"=, "+"=,"-"=,"*"=,"%/%"=,"%%"= F, T)){ #OP이상
      return("규격의 연산자만 전달하세요")
    }else if(switch(EXPR = inOpr, "%/%"=,"%%"= T, F)) {         #OP중 0사용이상
      if (inNum1 == 0){                                         #OP중 0사용앞뒤확인
        return("오류1")
      } else if (inNum2 == 0){
        return("오류2")
      } 
    }
                                                                #여기부턴 숫자 OP 다 정상
    result <- switch(EXPR = inOpr, SUM=inNum1+inNum2,"-"=inNum1-inNum2,"*"=inNum1*inNum2,"%/%"=inNum1%/%inNum2,"%%"=inNum1%%inNum2)
    return(result)
  }else{                                                         #숫자이상
    return('숫자 이상... ')
  }
}

print(exam4(100, "SUM", 10))
print(exam4(100, "+", '10'))
print(exam4('100', "+", '10'))

print(exam4(100, "&", 10))

print(exam4(0, "%/%", 10))
print(exam4(0, "%%", 10))

print(exam4(100, "%/%", 0))
print(exam4(100, "%%", 0))

print(exam4(100, "+", 10))
print(exam4(100, "-", 10))
print(exam4(100, "*", 10))
print(exam4(100, "%/%", 10))
print(exam4(100, "%%", 10))
print(exam4(100, "%%", 9))


# [ 문제5 ]
exam5 <- function(inNum1, deco="#"){
  if(is.numeric(inNum1)){
    if(inNum1 > 0) {
      cat(rep(deco, inNum1), "\n")
    } else {
      cat("", "\n")
    }
  }else{
    return('숫자 이상... ')
  }
  return()
}

print(exam5(10,"*"))
exam5(10)
exam5(-10,"*")


# [ 문제6 ]
exam6 <- function(...) {
  #inScoreList <- c(...)
  #inScoreList <- list(...)[[1]]
  inScoreList <- unlist(list(...))
  for(score in inScoreList) {
    if(!is.na(score)) {
      grade <- switch(EXPR = ifelse(score >= 85,1,
                                ifelse(score >= 70,2, 
                                    ifelse(score < 69,3,4)))
                      ,"상","중","하","에러")
      print(paste(score, " 점은 ", grade, '등급 입니다.',sep=""))
    }else{
      print("NA 는 처리불가")
    }
  }
  return()
}


exam6(c(80, 50, 70, 66, NA, 35)) # 이경우 리스트로 받으면 [[1]]

exam6(80, 50, 70, 66, NA, 35) 





options("digits") # 현재 설정된 유효 숫자 범위 



# [ 문제1 ]
countEvenOdd <- function(inVector){
  if(all(is.numeric(inVector)) && is.vector(inVector)  && !is.list(inVector)) {
    cnteven <- 0; cntodd <- 0;
    for (dt in inVector)
      if (dt %% 2 == 1) {
        cntodd = cntodd + 1
      } else {
        cnteven = cnteven + 1
      }
    return(list(even = cnteven, odd = cntodd))

  } else {
    return()
  }
}

countEvenOdd(c(1,2,3,4,5,6,7,8,9,10))
tst <- countEvenOdd(1:5)
tst[[1]]
tst$odd
countEvenOdd(c(1,2,3,4,5,6,7,8,9,10,"A"))


# [ 문제2 ]
vmSum <- function(inVector){
  if (is.vector(inVector)  && !is.list(inVector)){
    if(!all(is.numeric(inVector))){
      print("숫자 벡터를 전달하숑!")
      return(0)
    }
    return(sum(inVector))
  } else{
    return("벡터만 전달하숑!")
  }
}

vmSum(c("A",2,3,4,5,6,7,8,9,10))
vmSum(list())
vmSum(c(1,2,3,4,5,6,7,8,9,10))


# [ 문제3 ]
vmSum2 <- function(inVector){
  if (is.vector(inVector)  && !is.list(inVector)){
    if(!all(is.numeric(inVector))){
      warning("숫자 벡터를 전달하숑!")
      return(0)
    }
    return(sum(inVector))
  } else{
    stop("벡터만 전달하숑!")
  }
}

vmSum2(c("A",2,3,4,5,6,7,8,9,10))
vmSum2(list())
vmSum2(c(1,2,3,4,5,6,7,8,9,10))


# [ 문제4 ]
mySum <- function(inVector){
  if( is.null(inVector)) return()
  if( is.vector(inVector)  && !is.list(inVector)) {
    if(any(is.na(inVector))) warning("NA를 최저값으로 변경하여 처리함!!")
    amteven <- 0; amtodd <- 0;
    for (cnt in 1:length(inVector)){
      if (cnt %% 2 == 1) {
        amtodd = amtodd + (if(is.na(inVector[cnt])){min(inVector,na.rm=TRUE)} else{inVector[cnt]})
      } else {
        amteven = amteven + (if(is.na(inVector[cnt])){min(inVector,na.rm=TRUE)} else{inVector[cnt]})
      }
    }
    return(list(evenSum  = amteven, oddSum = amtodd))
  } else {
    stop("벡터만 처리 가능!!")
  }
}

mySum <- function(x){
  if(is.null(x)){
    return()
  }else if(!is.vector(x) | is.list(x)){
    stop("벡터만 전달하세요!")
  }else{
    if(any(is.na(x))){
      warning("NA를 최저값으로 변경하여 처리함!")
      x[which(is.na(x))] <- min(x,na.rm=T)
    }
    o <- x[seq(1,length(x),2)]
    e <- x[seq(0,length(x),2)]
    oddSum <- sum(o)
    evenSum <- sum(e)
    l <- list(oddSum=oddSum,evenSum=evenSum)
    return(l)
    }
  }

mySum(NULL)
mySum(list())
mySum(c(1,2,3,4,5,6,7,8,9,10))
mySum(c(NA,2,3,4,5,6,7,8,9,10))

  
# [ 문제5 ]
testFunc <- function(...){
  print(...)
}
testFunc(c(1,2,3,4,5,6))

myExpr <- function(inFunc){
  if(is.function(inFunc)) {
    args <- sample(1:45, 6)
    inFunc(args)
  } else {
    stop("수행 안할꺼임!!")
  }
}

myExpr("A")
myExpr(1)
myExpr(testFunc)


# [ 문제6 ]
createVector1 <- function(...){
  args <- c(...)
  if (length(args) == 0) return()
  if(any(is.na(...))) return(NA)
  return(args)
}

createVector1()
createVector1(c(NA, 1, 2, 3))
createVector1(c(0, 1, 2, 3))
createVector1(c('0', '1', 2, 3))
createVector1(c(T,F))


# [ 문제7 ]
createVector2 <- function(...){
  args <- list(...)
  numList <- c(); charList<-c(); boolList<-c()
  for (dt in 1:length(args) ){
    if (is.numeric(args[[dt]])) {
      numList <- c(numList, args[[dt]])
    } else if (is.character(args[[dt]])) {
      charList <- c(charList, args[[dt]])
    } else if (is.logical(args[[dt]])) {
      boolList <- c(boolList, args[[dt]])
    }
    
  }
  return(list(numList = numList, charList = charList, boolList = boolList))
  
}

createVector2("A", 1, T, "B", 2, F)


# [ 문제8 ]
numList <- scan("data/iotest1.txt") 

ans1 <- sort(numList)
ans2 <- sort(numList, decreasing = TRUE)
ans3 <- sum(numList)
ans4 <- mean(numList)


cat("오름차순 :", ans1, "\n")
cat("내림차순 :", ans2, "\n")
cat("합 :", ans3, "\n")
cat("평균 :", ans4, "\n")

cat("오름차순 :", ans1, file="data/test1.R", append=TRUE, "\n")
cat("내림차순 :", ans2, file="data/test1.R", append=TRUE, "\n")
cat("합 :", ans3, file="data/test1.R", append=TRUE, "\n")
cat("평균 :", ans4, file="data/test1.R", append=TRUE, "\n")


# [ 문제9 ]
wordList <- scan("data/iotest2.txt", what="",encoding="UTF-8")
f_wordList <- factor(wordList)
smry <- summary(f_wordList)
maxLang <- names(smry)[which.max(smry)]

cat("가장 많이 등장한 단어는", maxLang, "입니다", file="data/test2.R", append=TRUE, "\n")

```



### - Day5

```R
library(rvest)
text<- NULL;
url <- "http://unico2013.dothome.co.kr/crawling/exercise_bs.html"
text <- read_html(url)
text

# <h1> 태그의 컨텐츠 
nodes1 <- html_nodes(text, "h1")
nodes1
html_text(nodes1)

# <a> 태그의 컨텐츠와 href 속성값
node2 <- html_nodes(text, "a")
node2
html_attr(node2, "href")

# <img> 태그의 src 속성값
node3 <- html_nodes(text, "body img")
node3
html_attr(node3, "src")

# 첫 번째 <h2> 태그의 컨텐츠
node4 <- html_nodes(text, "h2:first")
node4
html_text(node4)

# <ul> 태그의 자식 태그들 중 style 속성의 값이 green으로 끝나는 태그의 컨텐츠
node5 <- html_nodes(text, CSS="color:green")
node5
html_text(node5)

# 두 번째 <h2> 태그의 컨텐츠
node6 <- html_nodes(text, "body > h2:last")
node6
html_text(node6)

# <ol> 태그의 모든 자식 태그들의 컨텐츠 
node7 <- html_nodes(text, "body > ol > *")
node7
html_text(node7)

# <table> 태그의 모든 자손 태그들의 컨텐츠 
node8 <- html_nodes(text, "body > table *")
node8
html_text(node8)

# name이라는 클래스 속성을 갖는 <tr> 태그의 컨텐츠 
node9 <- html_nodes(text, "body > table > .name")
node9
html_text(node9)

#target이라는 아이디 속성을 갖는 <td> 태그의 컨텐츠
node10 <- html_nodes(text, "#target")
node10
html_text(node10)


```

